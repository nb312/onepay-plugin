/**
 * OnePay 结账页面支付选项自定义样式
 * 实现图标|文本|选中状态的布局，选中状态在最右边
 * 使用高优先级CSS防止外部样式覆盖
 */

/* 重置支付方法列表的基础样式 - 统一大卡片 */
.woocommerce-checkout .wc_payment_methods.payment_methods.methods {
    margin: 0 !important;
    padding: 0 !important;
    list-style: none !important;
    border: 1px solid #e0e0e0 !important;
    border-radius: 8px !important;
    background: #fff !important;
    overflow: hidden !important;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1) !important;
}

/* 支付方法项的容器样式 - 无边框无背景，仅横线分隔 */
.woocommerce-checkout .wc_payment_methods.payment_methods.methods li {
    position: relative !important;
    margin: 0 !important;
    padding: 16px 20px !important;
    border: none !important;
    border-bottom: 1px solid #f0f0f0 !important;
    background: transparent !important;
    list-style: none !important;
    transition: background-color 0.2s ease !important;
    cursor: pointer !important;
    display: block !important;
    width: 100% !important;
    box-sizing: border-box !important;
}

/* 最后一个支付方法项移除底部横线 */
.woocommerce-checkout .wc_payment_methods.payment_methods.methods li:last-child {
    border-bottom: none !important;
}

/* 悬停效果 - 轻微背景色变化，但不影响已选中项 */
.woocommerce-checkout .wc_payment_methods.payment_methods.methods li:hover:not(.selected):not(:has(input:checked)) {
    background-color: #f9f9f9 !important;
}

/* 选中状态的容器样式 - 仅背景色变化 */
.woocommerce-checkout .wc_payment_methods.payment_methods.methods li.selected,
.woocommerce-checkout .wc_payment_methods.payment_methods.methods li:has(input:checked) {
    background-color: #f0f8ff !important;
}

/* 隐藏原始的radio按钮 */
.woocommerce-checkout .wc_payment_methods.payment_methods.methods li input[type="radio"] {
    position: absolute !important;
    opacity: 0 !important;
    width: 1px !important;
    height: 1px !important;
    overflow: hidden !important;
    clip: rect(0, 0, 0, 0) !important;
    pointer-events: none !important;
}

/* 支付方法标签的容器 */
.woocommerce-checkout .wc_payment_methods.payment_methods.methods li label {
    position: relative !important;
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    width: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
    cursor: pointer !important;
    font-weight: normal !important;
    line-height: 1.4 !important;
    color: #333 !important;
    text-decoration: none !important;
    border: none !important;
    background: none !important;
}

/* 左侧内容区域：图标 + 文本 */
.woocommerce-checkout .wc_payment_methods.payment_methods.methods li label::before {
    content: '' !important;
    display: flex !important;
    align-items: center !important;
    flex: 1 !important;
    margin-right: 15px !important;
}

/* 支付方法图标样式 */
.woocommerce-checkout .wc_payment_methods.payment_methods.methods li label img {
    width: 32px !important;
    height: 32px !important;
    margin-right: 12px !important;
    margin-left: 0 !important;
    border-radius: 50% !important;
    object-fit: contain !important;
    background: #f5f5f5 !important;
    padding: 4px !important;
    box-sizing: border-box !important;
    vertical-align: middle !important;
    display: inline-block !important;
}

/* 当没有图标时，创建一个默认的图标占位符 */
.woocommerce-checkout .wc_payment_methods.payment_methods.methods li label:not(:has(img))::before {
    content: '💳' !important;
    width: 32px !important;
    height: 32px !important;
    margin-right: 12px !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    background: #f5f5f5 !important;
    border-radius: 50% !important;
    font-size: 16px !important;
    flex-shrink: 0 !important;
}

/* 支付方法文本样式 */
.woocommerce-checkout .wc_payment_methods.payment_methods.methods li label .payment-method-text {
    flex: 1 !important;
    font-size: 16px !important;
    font-weight: 500 !important;
    color: #333 !important;
    margin: 0 !important;
    padding: 0 !important;
    text-align: left !important;
}

/* 右侧自定义单选按钮 */
.woocommerce-checkout .wc_payment_methods.payment_methods.methods li label::after {
    content: '' !important;
    width: 24px !important;
    height: 24px !important;
    border: 2px solid #ccc !important;
    border-radius: 50% !important;
    background: #fff !important;
    display: inline-block !important;
    position: relative !important;
    flex-shrink: 0 !important;
    transition: all 0.3s ease !important;
    margin-left: 15px !important;
}

/* 选中状态的自定义单选按钮 */
.woocommerce-checkout .wc_payment_methods.payment_methods.methods li:has(input:checked) label::after,
.woocommerce-checkout .wc_payment_methods.payment_methods.methods li.selected label::after {
    border-color: #4CAF50 !important;
    background: #4CAF50 !important;
    box-shadow: inset 0 0 0 4px #fff !important;
}

/* 悬停效果 */
.woocommerce-checkout .wc_payment_methods.payment_methods.methods li:hover {
    background-color: #f9f9f9 !important;
}

.woocommerce-checkout .wc_payment_methods.payment_methods.methods li:hover label::after {
    border-color: #4CAF50 !important;
}

/* 禁用状态 */
.woocommerce-checkout .wc_payment_methods.payment_methods.methods li:has(input:disabled) {
    opacity: 0.6 !important;
    cursor: not-allowed !important;
    pointer-events: none !important;
}

/* 支付方法描述区域 */
.woocommerce-checkout .wc_payment_methods.payment_methods.methods li .payment_box {
    margin-top: 15px !important;
    padding: 15px !important;
    background: #f9f9f9 !important;
    border: 1px solid #e0e0e0 !important;
    border-radius: 4px !important;
    font-size: 14px !important;
    color: #666 !important;
    line-height: 1.5 !important;
}

/* 移动端适配 */
@media (max-width: 768px) {
    .woocommerce-checkout .wc_payment_methods.payment_methods.methods li {
        padding: 12px !important;
        margin-bottom: 8px !important;
    }
    
    .woocommerce-checkout .wc_payment_methods.payment_methods.methods li label img {
        width: 28px !important;
        height: 28px !important;
        margin-right: 10px !important;
    }
    
    .woocommerce-checkout .wc_payment_methods.payment_methods.methods li label:not(:has(img))::before {
        width: 28px !important;
        height: 28px !important;
        margin-right: 10px !important;
        font-size: 14px !important;
    }
    
    .woocommerce-checkout .wc_payment_methods.payment_methods.methods li label .payment-method-text {
        font-size: 15px !important;
    }
    
    .woocommerce-checkout .wc_payment_methods.payment_methods.methods li label::after {
        width: 20px !important;
        height: 20px !important;
        margin-left: 10px !important;
    }
}

/* 确保在所有主题中都能正常工作的高优先级覆盖 */
.woocommerce form .form-row .woocommerce-checkout .wc_payment_methods.payment_methods.methods,
body.woocommerce-checkout .wc_payment_methods.payment_methods.methods,
.woocommerce-page .wc_payment_methods.payment_methods.methods {
    border: 2px solid #e0e0e0 !important;
    border-radius: 8px !important;
    background: #fff !important;
    overflow: hidden !important;
}

.woocommerce form .form-row .woocommerce-checkout .wc_payment_methods.payment_methods.methods li,
body.woocommerce-checkout .wc_payment_methods.payment_methods.methods li,
.woocommerce-page .wc_payment_methods.payment_methods.methods li {
    display: block !important;
    width: 100% !important;
    float: none !important;
    clear: both !important;
    margin: 0 !important;
    border: none !important;
    border-bottom: 1px solid #f0f0f0 !important;
}

/* 特定OnePay网关的图标优化 */
.woocommerce-checkout .wc_payment_methods.payment_methods.methods li.payment_method_onepay_fps label img,
.woocommerce-checkout .wc_payment_methods.payment_methods.methods li.payment_method_onepay_russian_card label img,
.woocommerce-checkout .wc_payment_methods.payment_methods.methods li.payment_method_onepay_cards label img {
    background: transparent !important;
    padding: 2px !important;
}

/* 为OnePay FPS设置默认图标 */
.woocommerce-checkout .wc_payment_methods.payment_methods.methods li.payment_method_onepay_fps label:not(:has(img))::before {
    content: '⚡' !important;
    background: linear-gradient(135deg, #4CAF50, #45a049) !important;
    color: white !important;
}

/* 为OnePay Russian Card设置默认图标 */
.woocommerce-checkout .wc_payment_methods.payment_methods.methods li.payment_method_onepay_russian_card label:not(:has(img))::before {
    content: '🇷🇺' !important;
    background: linear-gradient(135deg, #FF6B6B, #ff5252) !important;
    color: white !important;
}

/* 为OnePay Visa设置默认图标 */
.woocommerce-checkout .wc_payment_methods.payment_methods.methods li.payment_method_onepay_visa label:not(:has(img))::before {
    content: 'V' !important;
    background: linear-gradient(135deg, #1A1F71, #1434CB) !important;
    color: white !important;
    font-weight: bold !important;
}

/* 为OnePay Mastercard设置默认图标 */
.woocommerce-checkout .wc_payment_methods.payment_methods.methods li.payment_method_onepay_mastercard label:not(:has(img))::before {
    content: 'M' !important;
    background: linear-gradient(135deg, #FF5F00, #EB001B) !important;
    color: white !important;
    font-weight: bold !important;
}

/* 支付方法详情容器 */
.woocommerce-checkout .wc_payment_methods.payment_methods.methods li .payment_box {
    margin-top: 16px !important;
    padding: 0 !important;
    border: none !important;
    background: transparent !important;
    border-radius: 0 !important;
    display: none !important; /* 默认隐藏 */
}

/* 显示支付方法详情 */
.woocommerce-checkout .wc_payment_methods.payment_methods.methods li.selected .payment_box,
.woocommerce-checkout .wc_payment_methods.payment_methods.methods li:has(input:checked) .payment_box {
    display: block !important;
}

/* 信用卡表单样式 */
.woocommerce-checkout .wc_payment_methods.payment_methods.methods li .wc-credit-card-form {
    margin: 0 !important;
    padding: 16px !important;
    background: #fafafa !important;
    border: 1px solid #e6e6e6 !important;
    border-radius: 6px !important;
}

.woocommerce-checkout .wc_payment_methods.payment_methods.methods li .wc-credit-card-form .form-row {
    margin-bottom: 15px !important;
}

.woocommerce-checkout .wc_payment_methods.payment_methods.methods li .wc-credit-card-form .form-row:last-child {
    margin-bottom: 0 !important;
}

.woocommerce-checkout .wc_payment_methods.payment_methods.methods li .wc-credit-card-form label {
    display: block !important;
    font-weight: 600 !important;
    margin-bottom: 5px !important;
    color: #333 !important;
    font-size: 14px !important;
    justify-content: flex-start !important;
}

.woocommerce-checkout .wc_payment_methods.payment_methods.methods li .wc-credit-card-form label::after {
    display: none !important;
}

.woocommerce-checkout .wc_payment_methods.payment_methods.methods li .wc-credit-card-form input[type="text"] {
    width: 100% !important;
    padding: 10px 12px !important;
    border: 2px solid #ddd !important;
    border-radius: 4px !important;
    font-size: 16px !important;
    transition: border-color 0.3s ease !important;
}

.woocommerce-checkout .wc_payment_methods.payment_methods.methods li .wc-credit-card-form input[type="text"]:focus {
    outline: none !important;
    border-color: #4CAF50 !important;
    box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.2) !important;
}

.woocommerce-checkout .wc_payment_methods.payment_methods.methods li .wc-credit-card-form .form-row-first {
    float: left !important;
    width: 48% !important;
    margin-right: 4% !important;
}

.woocommerce-checkout .wc_payment_methods.payment_methods.methods li .wc-credit-card-form .form-row-last {
    float: right !important;
    width: 48% !important;
}

.woocommerce-checkout .wc_payment_methods.payment_methods.methods li .wc-credit-card-form .clear {
    clear: both !important;
}

/* 移动端信用卡表单适配 */
@media (max-width: 768px) {
    .woocommerce-checkout .wc_payment_methods.payment_methods.methods li .wc-credit-card-form .form-row-first,
    .woocommerce-checkout .wc_payment_methods.payment_methods.methods li .wc-credit-card-form .form-row-last {
        float: none !important;
        width: 100% !important;
        margin-right: 0 !important;
    }
}